import { Meta, Canvas, Story, Controls } from '@storybook/addon-docs/blocks';
import * as Stories from './index.stories';

<Meta of={Stories} />

# ViewTransitionStartGroup ç»„ä»¶

## ç®€ä»‹

`ViewTransitionStartGroup` æ˜¯ä¸€ä¸ª **è§†å›¾è¿‡æ¸¡åŠ¨ç”»èµ·å§‹ä½ç½®çš„åˆ†ç»„å®¹å™¨**ï¼Œç”¨äº **æ‰¹é‡ç®¡ç†å¤šä¸ª `ViewTransitionStart` ç»„ä»¶**ã€‚

å®ƒä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼šå½“é¡µé¢ä¸­æœ‰ **å¤šä¸ªéœ€è¦è¿‡æ¸¡çš„å…ƒç´ ** æ—¶ï¼Œæä¾› **ç»Ÿä¸€çš„æ¨¡å¼é…ç½®** å’Œ **æ‰¹é‡æ•è·èƒ½åŠ›**ã€‚

---

## ä½•æ—¶ä½¿ç”¨ ViewTransitionStartGroupï¼Ÿ

- æœ‰ **å¤šä¸ª `ViewTransitionStart`** éœ€è¦ç»Ÿä¸€ç®¡ç†
- éœ€è¦ **ä¸€æ¬¡æ€§æ•è·å¤šä¸ªå…ƒç´ ** çš„ä½ç½®ä¿¡æ¯
- éœ€è¦ç»Ÿä¸€é…ç½®ç»„å†…æ‰€æœ‰å…ƒç´ çš„ **æ•è·æ¨¡å¼**
- å®ç° **å¡ç‰‡ç½‘æ ¼ã€å›¾ç‰‡ç”»å»Šã€åˆ—è¡¨** ç­‰åœºæ™¯

---

## æ ¸å¿ƒæ¦‚å¿µ

### 1. åˆ†ç»„ç®¡ç†

`ViewTransitionStartGroup` ä¼šè‡ªåŠ¨æ”¶é›†å…¶å­æ ‘ä¸­æ‰€æœ‰çš„ `ViewTransitionStart` ç»„ä»¶ï¼Œå¹¶æä¾›æ‰¹é‡æ“ä½œèƒ½åŠ›ã€‚

### 2. æ¨¡å¼ç»§æ‰¿

ç»„å†…çš„ `ViewTransitionStart` ä¼š **ç»§æ‰¿ Group çš„ `mode` é…ç½®**ï¼Œæ— éœ€å•ç‹¬è®¾ç½®ã€‚

```tsx
// Group è®¾ç½® mode="observe"ï¼Œç»„å†…æ‰€æœ‰ Start è‡ªåŠ¨ä½¿ç”¨ observe æ¨¡å¼
<ViewTransitionStartGroup mode="observe">
  <ViewTransitionStart id="item-1">...</ViewTransitionStart>
  <ViewTransitionStart id="item-2">...</ViewTransitionStart>
</ViewTransitionStartGroup>
```

### 3. æ‰¹é‡æ•è·

é€šè¿‡ ref è°ƒç”¨ `captureAll()` å¯ä»¥ä¸€æ¬¡æ€§æ•è·ç»„å†…æ‰€æœ‰å…ƒç´ çš„ä½ç½®ï¼š

```tsx
const groupRef = useRef<ViewTransitionStartGroupRef>(null)

// æ‰¹é‡æ•è·
groupRef.current?.captureAll()
```

---

## åŸºç¡€ç”¨æ³•

### å•ä¸ª Group ç”¨æ³•

å•ä¸ª `ViewTransitionStartGroup` ç®¡ç†å¤šä¸ªè¿‡æ¸¡å…ƒç´ ï¼ˆå¦‚ä¸€ä¸ªå¡ç‰‡å†…çš„å›¾ç‰‡å’Œæ ‡é¢˜ï¼‰ï¼š

<Canvas of={Stories.Basic} />

### åˆ—è¡¨ä¸­ä½¿ç”¨ï¼ˆæ¨èï¼‰

åœ¨åˆ—è¡¨åœºæ™¯ä¸­ï¼Œ**æ¨èæ¯ä¸ªåˆ—è¡¨é¡¹åˆ›å»ºä¸€ä¸ª `ViewTransitionStartGroup`**ï¼Œç‚¹å‡»æ—¶åªæ•è·è¯¥é¡¹å†…çš„å…ƒç´ ï¼š

<Canvas of={Stories.ListUsage} />

### è§†å›¾åˆ‡æ¢åœºæ™¯ï¼ˆç‰¹å®šåœºæ™¯ï¼‰

å½“éœ€è¦å®ç° **Grid/List è§†å›¾åˆ‡æ¢** æˆ– **æ’åºåŠ¨ç”»** ç­‰åœºæ™¯æ—¶ï¼Œå¯ä½¿ç”¨å•ä¸ª Group åŒ…è£¹æ•´ä¸ªåˆ—è¡¨ï¼š

<Canvas of={Stories.SingleGroupList} />

> âš ï¸ **æ€§èƒ½æ³¨æ„**ï¼šæ­¤ç”¨æ³•ä¼šä¸€æ¬¡æ€§æ•è·åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ ä½ç½®ã€‚**é•¿åˆ—è¡¨ï¼ˆ100+ é¡¹ï¼‰å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜**ã€‚
>
> **é€‚ç”¨åœºæ™¯**ï¼š
> - Grid/List è§†å›¾åˆ‡æ¢
> - åˆ—è¡¨æ’åºåŠ¨ç”»
> - å°‘é‡å›ºå®šå…ƒç´ çš„æ‰¹é‡æ“ä½œ
>
> **ä¸é€‚ç”¨åœºæ™¯**ï¼š
> - é•¿åˆ—è¡¨ç‚¹å‡»è·³è½¬è¯¦æƒ…
> - éœ€è¦é¢‘ç¹è§¦å‘æ•è·çš„äº¤äº’

> ğŸ’¡ **å®Œæ•´æ¡ˆä¾‹**ï¼šä¸Šæ–¹ç¤ºä¾‹ä»…å±•ç¤ºä½ç½®æ•è·ï¼Œæœªç»“åˆ `ViewTransitionEndGroup` å®ç°å®Œæ•´è¿‡æ¸¡åŠ¨ç”»ã€‚  
> ğŸ‘‰ æŸ¥çœ‹å®Œæ•´ Grid/List åˆ‡æ¢æ¡ˆä¾‹ï¼š[GoodsListChange ç¤ºä¾‹](?path=/story/examples-viewtransition-listchange--default)

---

## Props

<Controls />

---

## Ref Methods

<table>
  <thead>
    <tr>
      <th>æ–¹æ³•</th>
      <th>ç±»å‹</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>captureAll()</code></td>
      <td><code>() =&gt; void</code></td>
      <td>æ‰¹é‡æ•è·ç»„å†…æ‰€æœ‰å…ƒç´ çš„ä½ç½®</td>
    </tr>
  </tbody>
</table>

---

## æ¨¡å¼ç¤ºä¾‹

### Click æ¨¡å¼

ç‚¹å‡»æŸä¸ªå…ƒç´ æ—¶ï¼Œæ‰¹é‡æ•è·ç»„å†…æ‰€æœ‰å…ƒç´ çš„ä½ç½®ï¼š

<Canvas of={Stories.ClickMode} />

### Observe æ¨¡å¼

æ»šåŠ¨æ—¶è‡ªåŠ¨æ•è·å¯è§å…ƒç´ ä½ç½®ï¼š

<Canvas of={Stories.ObserveMode} />

---

## ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»

> `ViewTransitionStartGroup` æ˜¯ `ViewTransitionStart` çš„ã€Œç®¡ç†å®¹å™¨ã€ï¼Œ  
> å®ƒä¸ç›´æ¥å‚ä¸åŠ¨ç”»ï¼Œè€Œæ˜¯æä¾›æ‰¹é‡ç®¡ç†èƒ½åŠ›ã€‚

<table>
  <thead>
    <tr>
      <th>ç»„ä»¶</th>
      <th>è§’è‰²</th>
      <th>å…³ç³»</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ViewTransitionStart</code></td>
      <td>å­å•å…ƒ</td>
      <td>è¢« Group æ”¶é›†å’Œç®¡ç†</td>
    </tr>
    <tr>
      <td><code>ViewTransitionEndGroup</code></td>
      <td>å¯¹åº”çš„ End ç®¡ç†å™¨</td>
      <td>é€šå¸¸æˆå¯¹ä½¿ç”¨ï¼ŒStart ä¾§ç”¨ StartGroupï¼ŒEnd ä¾§ç”¨ EndGroup</td>
    </tr>
  </tbody>
</table>

---

## å…¸å‹ä½¿ç”¨æ¨¡å¼

```tsx
// 1. åˆ›å»º ref
const startGroupRef = useRef<ViewTransitionStartGroupRef>(null)

// 2. ç‚¹å‡»æ—¶æ‰¹é‡æ•è·
const handleClick = (item) => {
  startGroupRef.current?.captureAll()  // æ•è·æ‰€æœ‰ä½ç½®
  openDetail(item)                      // æ‰“å¼€è¯¦æƒ…
}

// 3. æ¸²æŸ“
<ViewTransitionStartGroup ref={startGroupRef} mode="click">
  {items.map(item => (
    <ViewTransitionStart key={item.id} id={item.id} onClick={() => handleClick(item)}>
      <Card>{item.content}</Card>
    </ViewTransitionStart>
  ))}
</ViewTransitionStartGroup>
```

ğŸ‘‰ è¯·å‚è€ƒã€Œç»„åˆç¤ºä¾‹ã€ç« èŠ‚äº†è§£ä¸ `ViewTransitionEndGroup` çš„ååŒä½¿ç”¨
